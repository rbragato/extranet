{% extends "base.html" %}
{% set title = "Prix" %}

{% block content %}
<section class="card card-wide">
  <div class="card-head">
    <h1>Prix</h1>
    <p>Cr√©e et supprime des couples <strong>libell√© / prix</strong>.</p>
  </div>
  <div style="display:flex; gap:10px; margin-top:12px; flex-wrap:wrap;">
  <a class="btn ghost" href="{{ url_for('prices_invoice_pdf') }}">T√©l√©charger PDF</a>
  <button class="btn ghost" id="btnFriendPrices" type="button">
    Charger prix publics (10.1.0.3)
  </button>
</div>

<div id="friendPricesBox" class="card" style="margin-top:12px; display:none;">
  <div class="card-head" style="padding:0; margin-bottom:10px;">
    <h2 style="margin:0; font-size:18px;">Prix publics de LWOUIS</h2>
    <p style="margin:6px 0 0; color:rgba(255,255,255,.66);">Source: 10.1.0.3/prixpublic</p>
  </div>

  <div id="friendPricesStatus" style="color:rgba(255,255,255,.66); font-size:14px;"></div>

  <div class="table" style="margin-top:10px;">
    <div class="trow thead">
      <div>Article</div>
      <div>Prix</div>
      <div></div>
    </div>
    <div id="friendPricesRows"></div>
  </div>
</div>



  <form method="post" action="{{ url_for('prices_create') }}" class="form form-inline">
    <label class="field">
      <span>Libell√©</span>
      <input name="label" required placeholder="Ex: Abonnement Pro">
    </label>

    <label class="field">
      <span>Prix (‚Ç¨)</span>
      <input name="price" required inputmode="decimal" placeholder="19.99">
    </label>

    <button class="btn primary" type="submit">Ajouter</button>
  </form>

  <div class="table">
    <div class="trow thead">
      <div>Libell√©</div>
      <div>Prix</div>
      <div></div>
    </div>

    {% for it in items %}
      <div class="trow" data-price-id="{{ it.id }}">
        <div class="label">{{ it.label }}</div>
        <div class="price">{{ "%.2f"|format(it.price) }} ‚Ç¨</div>
        <div class="actions">
          <button class="btn ghost danger js-delete" type="button">Supprimer</button>
        </div>
      </div>
    {% else %}
      <div class="empty">
        Rien pour l‚Äôinstant. Ajoute ton premier prix üëá
      </div>
    {% endfor %}
  </div>
</section>
{% endblock %}
